@page "/cadastro"
@using Frontend.ViewModels
@using Microsoft.JSInterop
@inject CadastroViewModel ViewModel
@inject IJSRuntime JS
@implements IDisposable

<div class="cadastro-container">
    <div class="cadastro-card">
        <h2>CanilApp - Cadastro</h2>

        @if (!string.IsNullOrEmpty(ViewModel.ErrorMessage))
        {
            <div class="alert alert-danger">
                @ViewModel.ErrorMessage
            </div>
        }

        @if (!string.IsNullOrEmpty(ViewModel.SuccessMessage))
        {
            <div class="alert alert-success">
                @ViewModel.SuccessMessage
            </div>
        }

        <div class="form-group">
            <label>Nome *</label>
            <input type="text"
                   class="form-control"
                   @bind="ViewModel.PrimeiroNome"
                   placeholder="João"
                   disabled="@ViewModel.IsLoading" />
        </div>

        <div class="form-group">
            <label>Sobrenome</label>
            <input type="text"
                   class="form-control"
                   @bind="ViewModel.Sobrenome"
                   placeholder="Silva"
                   disabled="@ViewModel.IsLoading" />
        </div>

        <div class="form-group">
            <label>Email *</label>
            <input type="email"
                   class="form-control"
                   @bind="ViewModel.Email"
                   placeholder="joao@email.com"
                   disabled="@ViewModel.IsLoading" />
        </div>

        <div class="form-group">
            <label>Senha * (mín. 8 caracteres)</label>
            <input type="password"
                   class="form-control"
                   @bind="ViewModel.Senha"
                   placeholder="********"
                   disabled="@ViewModel.IsLoading" />
            <small class="form-text">
                Deve conter: maiúscula, minúscula, número e caractere especial
            </small>
        </div>

        <div class="form-group">
            <label>Confirmar Senha *</label>
            <input type="password"
                   class="form-control"
                   @bind="ViewModel.SenhaConfirmacao"
                   placeholder="********"
                   disabled="@ViewModel.IsLoading" />
        </div>

        <div class="form-group">
            <label>Permissão</label>
            <select class="form-control"
                    @bind="ViewModel.PermissaoSelecionada"
                    disabled="@ViewModel.IsLoading">
                @foreach (var permissao in ViewModel.Permissoes)
                {
                    <option value="@permissao">@permissao</option>
                }
            </select>
        </div>

        <button class="btn btn-success w-100 mb-3"
                @onclick="async () => await ViewModel.RegistrarCommand.ExecuteAsync(null)"
                disabled="@ViewModel.IsLoading">
            @if (ViewModel.IsLoading)
            {
                <span>⏳ Cadastrando...</span>
            }
            else
            {
                <span>Cadastrar</span>
            }
        </button>

        <div class="text-center">
            <button class="btn btn-link"
                    @onclick="() => ViewModel.NavigateToLoginCommand.Execute(null)"
                    disabled="@ViewModel.IsLoading">
                Já tem conta? Faça login
            </button>
        </div>
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        ViewModel.NavigationRequested += HandleNavigation;
    }

    private async void HandleNavigation(string url)
    {
        await JS.InvokeVoidAsync("eval", $"window.location.href = '{url}'");
    }

    public void Dispose()
    {
        ViewModel.NavigationRequested -= HandleNavigation;
    }
}

<style>
    /* ... mesmo CSS anterior ... */
</style>